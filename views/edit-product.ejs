<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit Product - Veloura Admin</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link
        href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700&family=Inter:wght@300;400;500;600&display=swap"
        rel="stylesheet">
    <style>
        .font-playfair {
            font-family: 'Playfair Display', serif;
        }

        .font-inter {
            font-family: 'Inter', sans-serif;
        }

        .premium-gradient {
            background: linear-gradient(135deg, #1e1e1e 0%, #2d2d2d 50%, #1a1a1a 100%);
        }

        .gold-gradient {
            background: linear-gradient(135deg, #d4af37 0%, #ffd700 50%, #b8860b 100%);
        }

        .cream-bg {
            background: linear-gradient(135deg, #faf7f2 0%, #f5f1ea 50%, #f0ebe3 100%);
        }

        /* Custom file upload styling */
        .file-upload-wrapper {
            position: relative;
            overflow: hidden;
            border: 2px dashed #d1d5db;
            border-radius: 12px;
            transition: all 0.3s ease;
        }

        .file-upload-wrapper:hover {
            border-color: #fbbf24;
            background-color: #fefce8;
        }

        .file-upload-wrapper.has-file {
            border-color: #10b981;
            background-color: #ecfdf5;
        }

        .file-upload-input {
            position: absolute;
            left: -9999px;
        }

        /* Radio button styling */
        .radio-button {
            appearance: none;
            width: 20px;
            height: 20px;
            border: 2px solid #d1d5db;
            border-radius: 50%;
            position: relative;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .radio-button:checked {
            border-color: #fbbf24;
            background-color: #fbbf24;
        }

        .radio-button:checked::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 8px;
            height: 8px;
            background-color: white;
            border-radius: 50%;
            transform: translate(-50%, -50%);
        }

        /* Color picker custom styling */
        .color-input {
            width: 80px;
            height: 40px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        /* Form animations */
        .form-section {
            opacity: 0;
            transform: translateY(20px);
            animation: fadeInUp 0.6s ease forwards;
        }

        .form-section:nth-child(2) {
            animation-delay: 0.1s;
        }

        .form-section:nth-child(3) {
            animation-delay: 0.2s;
        }

        .form-section:nth-child(4) {
            animation-delay: 0.3s;
        }

        .form-section:nth-child(5) {
            animation-delay: 0.4s;
        }

        @keyframes fadeInUp {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
    </style>
</head>

<body class="cream-bg font-inter min-h-screen">
    <!-- Admin Navigation Bar -->
    <nav class="premium-gradient shadow-2xl sticky top-0 z-50 border-b border-gray-800">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-20">
                <!-- Profile Section -->
                <div class="flex items-center">
                    <a href="/owners/dashboard"
                        class="flex items-center text-white hover:text-yellow-400 transition-all duration-300 group">
                        <div
                            class="bg-yellow-600 group-hover:bg-yellow-500 p-2 rounded-full transition-all duration-300">
                            <i class="fas fa-user-circle text-lg text-black"></i>
                        </div>
                        <span class="ml-3 hidden sm:block font-medium">Profile</span>
                    </a>
                </div>

                <!-- Logo -->
                <div class="flex-1 flex justify-center">
                    <a href="/" class="text-4xl font-bold font-playfair">
                        <span class="text-white">VEL</span><span class="text-yellow-400">OURA</span>
                        <span class="text-yellow-400 text-lg ml-2">ADMIN</span>
                    </a>
                </div>

                <!-- Admin Navigation Links -->
                <div class="flex items-center space-x-4">
                    <!-- Home Icon -->
                    <a href="/" class="text-white hover:text-yellow-400 transition-all duration-300 group"
                        title="Go to Homepage">
                        <div class="bg-gray-700 group-hover:bg-green-500 p-2 rounded-full transition-all duration-300">
                            <i class="fas fa-home text-lg"></i>
                        </div>
                    </a>

                    <!-- Cart -->
                    <a href="/cart" class="text-white hover:text-yellow-400 transition-all duration-300 group"
                        title="View Cart">
                        <div class="bg-gray-700 group-hover:bg-yellow-500 p-2 rounded-full transition-all duration-300">
                            <i class="fas fa-shopping-cart text-lg"></i>
                        </div>
                    </a>

                    <!-- Shop -->
                    <a href="/shop" class="text-white hover:text-yellow-400 transition-all duration-300 group"
                        title="View Shop">
                        <div class="bg-gray-700 group-hover:bg-blue-500 p-2 rounded-full transition-all duration-300">
                            <i class="fas fa-store text-lg"></i>
                        </div>
                    </a>

                    <!-- Manage Products -->
                    <a href="/owners/manage-products"
                        class="text-white hover:text-yellow-400 transition-all duration-300 group"
                        title="Manage Products">
                        <div class="bg-blue-600 group-hover:bg-blue-500 p-2 rounded-full transition-all duration-300">
                            <i class="fas fa-box text-lg"></i>
                        </div>
                    </a>

                    <!-- Logout -->
                    <a href="/users/logout" class="text-white hover:text-red-400 transition-all duration-300 group"
                        title="Logout">
                        <div class="bg-red-600 group-hover:bg-red-500 p-2 rounded-full transition-all duration-300">
                            <i class="fas fa-sign-out-alt text-lg"></i>
                        </div>
                    </a>
                </div>
            </div>
        </div>
    </nav>


    <!-- Main Content -->
    <div class="max-w-4xl mx-auto py-12 px-4 sm:px-6 lg:px-8">
        <!-- Header -->
        <div class="text-center mb-12 form-section">
            <h1 class="text-4xl font-bold font-playfair text-gray-900 mb-4">Edit Product</h1>
            <p class="text-lg text-gray-600">Update your jewelry item details</p>
            <div class="mt-4">
                <a href="/owners/manage-products" class="text-yellow-600 hover:text-yellow-700 font-medium">
                    <i class="fas fa-arrow-left mr-2"></i>Back to Manage Products
                </a>
            </div>
        </div>

        <!-- Flash Messages -->
        <div class="form-section">
            <% if (error && error.length> 0) { %>
                <div class="bg-red-100 border border-red-400 text-red-700 px-6 py-4 rounded-lg mb-8 shadow-sm">
                    <div class="flex items-center">
                        <i class="fas fa-exclamation-triangle mr-3"></i>
                        <span>
                            <%= error %>
                        </span>
                    </div>
                </div>
                <% } %>

                    <% if (success && success.length> 0) { %>
                        <div
                            class="bg-green-100 border border-green-400 text-green-700 px-6 py-4 rounded-lg mb-8 shadow-sm">
                            <div class="flex items-center">
                                <i class="fas fa-check-circle mr-3"></i>
                                <span>
                                    <%= success %>
                                </span>
                            </div>
                        </div>
                        <% } %>
        </div>

        <!-- Edit Product Form -->
        <form action="/products/update/<%= product._id %>" method="POST" enctype="multipart/form-data"
            class="bg-white rounded-2xl shadow-2xl p-8">
            <!-- Product Details Section -->
            <div class="form-section mb-10">
                <h2 class="text-2xl font-semibold font-playfair text-gray-900 mb-8 flex items-center">
                    <i class="fas fa-info-circle text-yellow-600 mr-3"></i>
                    Product Details
                </h2>

                <!-- Current Image Display & New Image Upload -->
                <div class="mb-8">
                    <label class="block text-lg font-semibold text-gray-700 mb-4">
                        <i class="fas fa-image text-yellow-600 mr-2"></i>Product Image
                    </label>

                    <!-- Current Image -->
                    <% if (product.image) { %>
                        <div class="mb-4 p-4 bg-gray-50 rounded-lg">
                            <p class="text-sm text-gray-600 mb-2">Current Image:</p>
                            <img src="data:image/jpeg;base64,<%= product.image.toString('base64') %>"
                                alt="<%= product.name %>" class="w-32 h-32 object-cover rounded-lg shadow-md">
                        </div>
                        <% } %>

                            <!-- New Image Upload -->
                            <div class="file-upload-wrapper p-8 text-center cursor-pointer"
                                onclick="document.getElementById('image').click()">
                                <input type="file" id="image" name="image" accept="image/*" class="file-upload-input"
                                    onchange="handleFileUpload(this)">
                                <div id="upload-content">
                                    <i class="fas fa-cloud-upload-alt text-4xl text-gray-400 mb-4"></i>
                                    <p class="text-gray-600 text-lg mb-2">Click to upload new image (optional)</p>
                                    <p class="text-gray-400 text-sm">PNG, JPG, JPEG up to 10MB</p>
                                    <p class="text-gray-500 text-sm mt-4" id="file-status">No new file chosen</p>
                                </div>
                            </div>
                </div>

                <!-- Product Name and Price Row -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-8">
                    <div>
                        <label for="name" class="block text-lg font-semibold text-gray-700 mb-3">
                            <i class="fas fa-tag text-yellow-600 mr-2"></i>Product Name *
                        </label>
                        <input type="text" id="name" name="name" required value="<%= product.name %>"
                            placeholder="Enter product name"
                            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500 outline-none text-gray-700 transition-all duration-300">
                    </div>

                    <div>
                        <label for="price" class="block text-lg font-semibold text-gray-700 mb-3">
                            <i class="fas fa-rupee-sign text-yellow-600 mr-2"></i>Product Price *
                        </label>
                        <input type="number" id="price" name="price" required value="<%= product.price %>"
                            placeholder="Enter price in ₹" min="1" step="0.01"
                            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500 outline-none text-gray-700 transition-all duration-300">
                    </div>
                </div>

                <!-- Discount Price -->
                <div class="mb-8">
                    <label for="discount" class="block text-lg font-semibold text-gray-700 mb-3">
                        <i class="fas fa-percent text-yellow-600 mr-2"></i>Discount Price
                    </label>
                    <input type="number" id="discount" name="discount" value="<%= product.discount || '' %>"
                        placeholder="Enter discount amount (optional)" min="0" step="0.01"
                        class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500 outline-none text-gray-700 transition-all duration-300">
                    <p class="text-sm text-gray-500 mt-2">Leave empty for no discount</p>
                </div>

                <!-- Stock -->
                <div class="mb-8">
                    <label for="stock" class="block text-lg font-semibold text-gray-700 mb-3">
                        <i class="fas fa-boxes text-yellow-600 mr-2"></i>Stock Quantity *
                    </label>
                    <input type="number" id="stock" name="stock" required value="<%= product.stock || 0 %>"
                        placeholder="Enter available stock quantity" min="0" step="1"
                        class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500 outline-none text-gray-700 transition-all duration-300">
                    <p class="text-sm text-gray-500 mt-2">Number of items available in stock</p>
                </div>


                <!-- Description -->
                <div class="mb-8">
                    <label for="description" class="block text-lg font-semibold text-gray-700 mb-3">
                        <i class="fas fa-align-left text-yellow-600 mr-2"></i>Description
                    </label>
                    <textarea id="description" name="description" rows="4" placeholder="Enter product description"
                        class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500 outline-none text-gray-700 transition-all duration-300 resize-vertical"><%= product.description || '' %></textarea>
                </div>
            </div>

            <!-- Product Type Section -->
            <div class="form-section mb-10">
                <h2 class="text-2xl font-semibold font-playfair text-gray-900 mb-8 flex items-center">
                    <i class="fas fa-layer-group text-yellow-600 mr-3"></i>
                    Product Type
                </h2>

                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <label
                        class="flex items-center p-4 border border-gray-300 rounded-lg cursor-pointer hover:bg-gray-50 transition-all duration-300">
                        <input type="radio" name="category" value="chain" class="radio-button mr-3"
                            <%=product.category==='chain' ? 'checked' : '' %> required>
                        <div>
                            <i class="fas fa-link text-yellow-600 text-xl mr-2"></i>
                            <span class="text-lg font-medium text-gray-700">Chain</span>
                        </div>
                    </label>

                    <label
                        class="flex items-center p-4 border border-gray-300 rounded-lg cursor-pointer hover:bg-gray-50 transition-all duration-300">
                        <input type="radio" name="category" value="bracelet" class="radio-button mr-3"
                            <%=product.category==='bracelet' ? 'checked' : '' %> required>
                        <div>
                            <i class="fas fa-circle text-yellow-600 text-xl mr-2"></i>
                            <span class="text-lg font-medium text-gray-700">Bracelet</span>
                        </div>
                    </label>

                    <label
                        class="flex items-center p-4 border border-gray-300 rounded-lg cursor-pointer hover:bg-gray-50 transition-all duration-300">
                        <input type="radio" name="category" value="ring" class="radio-button mr-3"
                            <%=product.category==='ring' ? 'checked' : '' %> required>
                        <div>
                            <i class="fas fa-ring text-yellow-600 text-xl mr-2"></i>
                            <span class="text-lg font-medium text-gray-700">Ring</span>
                        </div>
                    </label>
                </div>
            </div>

            <!-- Feature Product Section -->
            <div class="form-section mb-10">
                <h2 class="text-2xl font-semibold font-playfair text-gray-900 mb-6 flex items-center">
                    <i class="fas fa-star text-yellow-600 mr-3"></i>
                    Want to Feature this Product?
                </h2>
                <p class="text-gray-600 mb-6">Featured products will appear on the home page in their respective
                    category sections</p>

                <div class="flex space-x-8">
                    <label
                        class="flex items-center p-4 border-2 border-green-300 rounded-lg cursor-pointer hover:bg-green-50 transition-all duration-300 feature-option">
                        <input type="radio" name="isFeatured" value="true" class="radio-button mr-4"
                            <%=product.isFeatured ? 'checked' : '' %> onchange="updateFeatureSelection()">
                        <div>
                            <i class="fas fa-check-circle text-green-600 text-xl mr-2"></i>
                            <span class="text-lg font-medium text-gray-700">Yes, Feature it</span>
                        </div>
                    </label>

                    <label
                        class="flex items-center p-4 border-2 border-gray-300 rounded-lg cursor-pointer hover:bg-gray-50 transition-all duration-300 feature-option">
                        <input type="radio" name="isFeatured" value="false" class="radio-button mr-4"
                            <%=!product.isFeatured ? 'checked' : '' %> onchange="updateFeatureSelection()">
                        <div>
                            <i class="fas fa-times-circle text-gray-600 text-xl mr-2"></i>
                            <span class="text-lg font-medium text-gray-700">No, Don't Feature</span>
                        </div>
                    </label>
                </div>
            </div>

            <!-- Panel Details Section -->
            <div class="form-section mb-10">
                <h2 class="text-2xl font-semibold font-playfair text-gray-900 mb-8 flex items-center">
                    <i class="fas fa-palette text-yellow-600 mr-3"></i>
                    Panel Details
                </h2>

                <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                    <!-- Background Color -->
                    <div>
                        <label for="bgcolor" class="block text-lg font-semibold text-gray-700 mb-3">
                            <i class="fas fa-fill-drip text-yellow-600 mr-2"></i>Background Color
                        </label>
                        <div class="flex items-center space-x-4">
                            <input type="color" id="bgcolor" name="bgcolor" value="<%= product.bgcolor || '#ffffff' %>"
                                class="color-input" onchange="updateColorPreview('bg', this.value)">
                            <span id="bg-preview" class="text-sm text-gray-600">
                                <%= product.bgcolor || '#ffffff' %>
                            </span>
                        </div>
                    </div>

                    <!-- Panel Color -->
                    <div>
                        <label for="panelcolor" class="block text-lg font-semibold text-gray-700 mb-3">
                            <i class="fas fa-square text-yellow-600 mr-2"></i>Panel Color
                        </label>
                        <div class="flex items-center space-x-4">
                            <input type="color" id="panelcolor" name="panelcolor"
                                value="<%= product.panelcolor || '#000000' %>" class="color-input"
                                onchange="updateColorPreview('panel', this.value)">
                            <span id="panel-preview" class="text-sm text-gray-600">
                                <%= product.panelcolor || '#000000' %>
                            </span>
                        </div>
                    </div>

                    <!-- Text Color -->
                    <div>
                        <label for="textcolor" class="block text-lg font-semibold text-gray-700 mb-3">
                            <i class="fas fa-font text-yellow-600 mr-2"></i>Text Color
                        </label>
                        <div class="flex items-center space-x-4">
                            <input type="color" id="textcolor" name="textcolor"
                                value="<%= product.textcolor || '#000000' %>" class="color-input"
                                onchange="updateColorPreview('text', this.value)">
                            <span id="text-preview" class="text-sm text-gray-600">
                                <%= product.textcolor || '#000000' %>
                            </span>
                        </div>
                    </div>
                </div>

                <!-- Color Preview Box -->
                <div class="mt-8 p-6 rounded-lg border-2 border-gray-200" id="color-preview-box"
                    style="background-color: <%= product.bgcolor || '#ffffff' %>; border-color: <%= product.panelcolor || '#000000' %>;">
                    <p id="preview-text" style="color: <%= product.textcolor || '#000000' %>;"
                        class="text-lg font-medium">Preview: This is how your colors will look</p>
                </div>
            </div>

            <!-- Submit Buttons -->
            <div class="form-section text-center">
                <div class="flex flex-col sm:flex-row gap-4 justify-center">
                    <button type="submit"
                        class="gold-gradient text-black font-bold py-4 px-12 rounded-lg text-xl shadow-lg hover:scale-105 transition-all duration-300 flex items-center justify-center">
                        <i class="fas fa-save mr-3"></i>
                        Update Product
                    </button>

                    <a href="/owners/manage-products"
                        class="bg-gray-600 hover:bg-gray-700 text-white font-bold py-4 px-12 rounded-lg text-xl shadow-lg hover:scale-105 transition-all duration-300 flex items-center justify-center">
                        <i class="fas fa-times mr-3"></i>
                        Cancel
                    </a>
                </div>
            </div>
        </form>
    </div>

    <!-- Footer -->
    <footer class="premium-gradient text-white py-16 mt-20">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-12">
                <div class="md:col-span-2">
                    <div class="flex items-center mb-6">
                        <h3 class="text-3xl font-bold font-playfair">
                            <span class="text-white">VEL</span><span class="text-yellow-400">OURA</span>
                            <span class="text-yellow-400 text-lg ml-2">ADMIN</span>
                        </h3>
                    </div>
                    <p class="text-gray-300 mb-6 text-lg leading-relaxed max-w-md">
                        Admin panel for managing your luxury jewelry collection. Create, edit, and manage all your
                        products with ease.
                    </p>
                </div>

                <div>
                    <h4 class="text-lg font-semibold mb-6 text-yellow-400">Admin Links</h4>
                    <ul class="space-y-3">
                        <li><a href="/owners/dashboard"
                                class="text-gray-300 hover:text-white transition-colors duration-300">Dashboard</a></li>
                        <li><a href="/owners/create-product"
                                class="text-gray-300 hover:text-white transition-colors duration-300">Create Product</a>
                        </li>
                        <li><a href="/owners/manage-products"
                                class="text-gray-300 hover:text-white transition-colors duration-300">Manage
                                Products</a></li>
                        <li><a href="/shop" class="text-gray-300 hover:text-white transition-colors duration-300">View
                                Shop</a></li>
                    </ul>
                </div>

                <div>
                    <h4 class="text-lg font-semibold mb-6 text-yellow-400">Quick Actions</h4>
                    <ul class="space-y-3">
                        <li><a href="/" class="text-gray-300 hover:text-white transition-colors duration-300">View
                                Homepage</a></li>
                        <li><a href="/users/logout"
                                class="text-gray-300 hover:text-white transition-colors duration-300">Logout</a></li>
                    </ul>
                </div>
            </div>

            <div class="border-t border-gray-800 mt-12 pt-8 text-center">
                <p class="text-gray-400">
                    © 2025 Veloura Admin Panel. All rights reserved.
                </p>
            </div>
        </div>
    </footer>

    <!-- JavaScript -->
    <script>
        // File upload handler
        function handleFileUpload(input) {
            const wrapper = input.closest('.file-upload-wrapper');
            const status = document.getElementById('file-status');
            const content = document.getElementById('upload-content');

            if (input.files && input.files[0]) {
                const file = input.files[0];
                const fileName = file.name;
                const fileSize = (file.size / 1024 / 1024).toFixed(2); // MB

                wrapper.classList.add('has-file');
                status.textContent = `${fileName} (${fileSize} MB)`;
                status.className = 'text-green-600 text-sm mt-4 font-medium';

                // Show preview if it's an image
                const reader = new FileReader();
                reader.onload = function (e) {
                    content.innerHTML = `
                        <img src="${e.target.result}" alt="Preview" class="w-32 h-32 object-cover rounded-lg mx-auto mb-4">
                        <p class="text-green-600 text-lg mb-2 font-medium">New image uploaded!</p>
                        <p class="text-green-600 text-sm" id="file-status">${fileName} (${fileSize} MB)</p>
                        <p class="text-gray-500 text-sm mt-2">Click to change image</p>
                    `;
                };
                reader.readAsDataURL(file);
            } else {
                wrapper.classList.remove('has-file');
                status.textContent = 'No new file chosen';
                status.className = 'text-gray-500 text-sm mt-4';
            }
        }

        // Feature selection handler
        function updateFeatureSelection() {
            const options = document.querySelectorAll('.feature-option');
            const radios = document.querySelectorAll('input[name="isFeatured"]');

            radios.forEach((radio, index) => {
                if (radio.checked) {
                    options[index].classList.add('ring-2', 'ring-yellow-400', 'bg-yellow-50');
                    options[index].classList.remove('border-gray-300', 'border-green-300');
                } else {
                    options[index].classList.remove('ring-2', 'ring-yellow-400', 'bg-yellow-50');
                    if (index === 0) {
                        options[index].classList.add('border-green-300');
                    } else {
                        options[index].classList.add('border-gray-300');
                    }
                }
            });
        }

        // Color preview handler
        function updateColorPreview(type, value) {
            const previewBox = document.getElementById('color-preview-box');
            const previewText = document.getElementById('preview-text');
            const preview = document.getElementById(type + '-preview');

            preview.textContent = value;

            if (type === 'bg') {
                previewBox.style.backgroundColor = value;
            } else if (type === 'panel') {
                previewBox.style.borderColor = value;
            } else if (type === 'text') {
                previewText.style.color = value;
            }
        }

        // Form validation
        document.querySelector('form').addEventListener('submit', function (e) {
            const name = document.getElementById('name').value.trim();
            const price = document.getElementById('price').value;
            const category = document.querySelector('input[name="category"]:checked');

            if (!name || !price || !category) {
                e.preventDefault();
                showNotification('Please fill all required fields', 'error');
                return;
            }

            if (parseFloat(price) <= 0) {
                e.preventDefault();
                showNotification('Price must be greater than 0', 'error');
                return;
            }

            // Show loading state
            const submitButton = document.querySelector('button[type="submit"]');
            const originalText = submitButton.innerHTML;
            submitButton.innerHTML = '<i class="fas fa-spinner fa-spin mr-3"></i>Updating Product...';
            submitButton.disabled = true;

            // Re-enable after timeout (in case of error)
            setTimeout(() => {
                submitButton.innerHTML = originalText;
                submitButton.disabled = false;
            }, 10000);
        });

        // Notification system
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `fixed top-4 right-4 p-4 rounded-lg shadow-lg z-50 transition-all duration-300 ${type === 'success' ? 'bg-green-500 text-white' :
                    type === 'error' ? 'bg-red-500 text-white' :
                        type === 'warning' ? 'bg-yellow-500 text-black' :
                            'bg-blue-500 text-white'
                }`;
            notification.textContent = message;

            document.body.appendChild(notification);

            setTimeout(() => {
                notification.style.opacity = '0';
                setTimeout(() => {
                    if (document.body.contains(notification)) {
                        document.body.removeChild(notification);
                    }
                }, 300);
            }, 3000);
        }

        // Auto-hide flash messages after 5 seconds
        setTimeout(() => {
            const flashMessages = document.querySelectorAll('[class*="bg-red-100"], [class*="bg-green-100"]');
            flashMessages.forEach(message => {
                message.style.transition = 'opacity 0.5s ease';
                message.style.opacity = '0';
                setTimeout(() => {
                    if (message.parentNode) {
                        message.parentNode.removeChild(message);
                    }
                }, 500);
            });
        }, 5000);

        // Initialize feature selection styling and color previews on page load
        document.addEventListener('DOMContentLoaded', function () {
            updateFeatureSelection();

            // Initialize color previews with current values
            const bgColor = document.getElementById('bgcolor').value;
            const panelColor = document.getElementById('panelcolor').value;
            const textColor = document.getElementById('textcolor').value;

            updateColorPreview('bg', bgColor);
            updateColorPreview('panel', panelColor);
            updateColorPreview('text', textColor);
        });
    </script>
</body>

</html>